<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta content="webkit" name="renderer">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
    <link href="js/bootstrap/css/bootstrap.min.css" rel="stylesheet"
          type="text/css"/>
    <link href="js/bootstrap-fileinput-master20161101/css/fileinput.min.css" rel="stylesheet"
          type="text/css"/>
    <link href="css/common.css" rel="stylesheet" type="text/css"/>
    <link href="css/inbox.css" rel="stylesheet" type="text/css"/>
    <link href="js/layer/skin/default/layer.css" rel="stylesheet"/>
    <link href="layui/css/layui.css" media="all" rel="stylesheet"/>
</head>
<body>
<div>
    <!--导航栏-->
    <ul class="layui-nav">
        <li class="layui-nav-item">
            <a href="">主页</a>
        </li>
        <li class="layui-nav-item">
            <a href="personal.jsp">个人中心<span class="layui-badge-dot"></span></a>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:"><img class="layui-nav-img" src="//t.cn/RCzsdCq">我</a>
            <dl class="layui-nav-child">
                <dd><a href="javascript:">修改信息</a></dd>
                <dd><a href="javascript:">安全管理</a></dd>
                <dd><a href="javascript:">退了</a></dd>
            </dl>
        </li>
    </ul>
    <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
        <img src="img/bg/bg_inbox_file.jpg">
    </div>
    <div class="layui-col-xs6 layui-col-sm6 layui-col-md4 clearfix layui-anim layui-anim-up ">
        <form action="" class="layui-form layui-form-pane " id="form" name="form">
            <div class="layui-form-item ">
                <label class="layui-form-label layui-bg-blue">姓名:</label>
                <div class="layui-input-block ">
                    <input autocomplete="off" class="layui-input"
                           id="name"
                           lay-verify="title" name="name" placeholder="请输入姓名"
                           style="background-color:transparent;font-weight: bold;color:lightblue" type="text">
                </div>
            </div>
            <div class="layui-form-item ">
                <label class="layui-form-label layui-bg-blue">学号:</label>
                <div class="layui-input-block ">
                    <input autocomplete="off" class="layui-input"
                           id="num"
                           lay-verify="title" name="num" placeholder="请输入学号"
                           style="background-color:transparent;font-weight: bold;color:lightblue" type="text">
                </div>
            </div>
            <div class="layui-form-item ">
                <label class="layui-form-label layui-bg-blue">年龄:</label>
                <div class="layui-input-block ">
                    <input autocomplete="off" class="layui-input"
                           id="age"
                           name="age" placeholder="请输入年龄"
                           style="background-color:transparent;font-weight: bold;color:lightblue" type="text">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-block">
                    <label class="layui-form-label">生日</label>
                    <div class="layui-input-block">
                        <input autocomplete="off" class="layui-input" id="date" lay-verify="date" name="birthday"
                               placeholder="yyyy-MM-dd" type="text">
                    </div>
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label layui-bg-blue">性别</label>
                <div class="layui-input-block">
                    <img src="img/icon/icon_male.png">
                    <img src="img/icon/icon_male_char.png">
                    <input checked name="sex" type="radio" value="男">
                    <img src="img/icon/icon_female.png">
                    <img src="img/icon/icon_female_char.png">
                    <input name="sex" type="radio" value="女">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label layui-bg-blue">省市:</label>
                <div class="layui-input-block">
                    <select id="s1" lay-filter="s1" lay-search name="province">
                        <option selected value="请选择">请选择</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label layui-bg-blue">市区:</label>
                <div class="layui-input-block">
                    <select id="s2" lay-search name="city">
                        <option selected value="请选择">请选择</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item" pane="null">
                <label class="layui-form-label">爱好</label>
                <div class="layui-input-block">
                    <input name="hobby" title="写作" type="checkbox" value="write">
                    <input name="hobby" title="阅读" type="checkbox" value="read">
                    <input name="hobby" title="听音乐" type="checkbox" value="music">
                    <input name="hobby" title="看电影" type="checkbox" value="movie">
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <div class="line-post">
                    <span class="line-post-block">个人自我介绍</span>
                </div>
                <div class="layui-input-block">
                    <textarea class="layui-textarea" id="intro" name="intro" placeholder="请输入内容"
                              style="color: lightblue"></textarea>
                </div>
            </div>

        </form>
        <!--文件上传区域开始-->
        <div class="inbox-footer">
            <div class="line-post">
                <span class="line-post-block" style="background: #178FE5;">附件</span>
            </div>
            <form enctype="multipart/form-data" method="POST">
                <div class="form-group">
                    <input id="file-upload" multiple name="uploadFile" type="file">
                </div>
            </form>
        </div>
        <!--文件上传区域结束-->
        <button class="layui-btn layui-btn-fluid layui-bg-blue " id="submit" style="font-weight: bold">提交
        </button>
    </div>
    <div class="layui-col-xs6 layui-col-sm6 layui-col-md0">
        <!--        <img src="img/bg/bg_inbox.jpg">-->
    </div>
</div>
<script src="layui/layui.js"></script>
<script>
    //注意：导航 依赖 element 模块，否则无法进行功能性操作
    layui.use(['jquery', 'form', 'laydate'], function () {
        var form = layui.form;
        var $ = layui.jquery;
        var laydate = layui.laydate;
        var s1 = $('#s1')
        var s2 = $('#s2')
        laydate.render({
            elem: '#date' //指定元素
        });
        for (var i = 0; i < provinceArr.length; i++) {
            s1.append("<option class='optiontest' value = '" + i + "' > " + provinceArr[i] + "</option>");
        }
        form.render('select')
        form.on('select(s1)', function (data) {
            s2.empty()
            console.log(data.value)
            for (var i = 1; i < cityArr[data.value].length; i++) {
                s2.append("<option value = '" + i + "' > " + cityArr[data.value][i] + "</option>");
                form.render('select')
                $("input").css({"background-color": "transparent", "font-weight": "bold", "color": "lightblue"});
            }
        })
        $(".layui-form-label").addClass("layui-bg-blue")
        $("input").css({"background-color": "transparent", "font-weight": "bold", "color": "lightblue"});
        $(".layui-form-checkbox").css({"background-color": "transparent", "font-weight": "bold"});
        $("span").css({"background-color": "transparent"})
        $(".layui-textarea").css({"background-color": "transparent"})
        $('#submit').click(function () {
            console.log(5)
            var form = $('#form').serializeArray();
            var json = JSON.stringify(form)
            var inboxId = '${param.link}'
            console.log(inboxId)
            console.log(json)
            $.ajax({
                url: getWebProjectName() + '/docSub.action',
                data: {"form": json, "inboxId": inboxId},
                success: function (data) {
                    console.log(data)
                }
            })
        });
    })

    function getWebProjectName() {
        var webProjectName = undefined;
        // 获取主机地址之后的目录，如： uimcardprj/share/meun.jsp
        var pathName = window.document.location.pathname;
        // 获取带"/"的项目名，如：/uimcardprj
        webProjectName = pathName.substring(0, pathName.substr(1).indexOf('/') + 1);

        return webProjectName;
    }
</script>
</body>
<script src="js/info.js"></script>
<script charset="utf-8" src="js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script charset="utf-8"
        src="js/bootstrap-fileinput-master20161101/js/fileinput.js" type="text/javascript"></script>
<script charset="utf-8" src="js/bootstrap/js/bootstrap.min.js"
        type="text/javascript"></script>
<script src="js/layer/layer.js"></script>
<script charset="utf-8"
        src="js/bootstrap-fileinput-master20161101/js/locales/zh.js" type="text/javascript"></script>
<script charset="utf-8" src="js/inbox.js" type="text/javascript"></script>

